<section class="container py-4">
<header class="gallery-head">
  <app-search-bar
    class="grow"
    [value]="fs.search()"
    (valueChange)="onSearchChange($event)">
  </app-search-bar>

  <app-difficulty-filter
    class="cell"
    [selected]="fs.difficulties()"
    (selectedChange)="onDifficultyChange($event)">
  </app-difficulty-filter>

  <app-category-filter
    class="cell"
    [options]="categoryOptions()"
    [selected]="fs.categories()"
    (selectedChange)="onCategoryChange($event)">
  </app-category-filter>
</header>

  <div *ngIf="error()" class="alert alert-danger my-3" role="alert">{{ error() }}</div>

  <div *ngIf="loading()" class="row g-3 my-2">
    <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let _ of [1,2,3,4,5,6,7,8]">
      <div class="skeleton-card rounded-3">
        <div class="skeleton-thumb rounded-top-3"></div>
        <div class="p-3">
          <div class="skeleton-line w-75 mb-2"></div>
          <div class="d-flex justify-content-between">
            <div class="skeleton-pill w-25"></div>
            <div class="skeleton-line w-25"></div>
          </div>
          <div class="skeleton-btn mt-3"></div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!loading() && videos().length === 0" class="text-center text-muted py-5">
    No results found.
  </div>

  <div *ngIf="!loading() && videos().length > 0" class="row g-3 my-2">
    <div class="col-sm-3 col-12" *ngFor="let video of videos(); trackBy: trackById">
      <app-video-card [video]="video"></app-video-card>
    </div>
  </div>

  <div class="d-flex justify-content-center mt-4" *ngIf="total() > fs.pageSize()">
    <mat-paginator
      [length]="total()"
      [pageSize]="fs.pageSize()"
      [pageIndex]="fs.pageIndex()"
      [pageSizeOptions]="[8,12,16,24]"
      (page)="onPage($event)">
    </mat-paginator>
  </div>
</section>
